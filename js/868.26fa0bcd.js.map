{"version":3,"file":"js/868.26fa0bcd.js","mappings":"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","sources":["webpack://lottery-app/./src/views/History.vue?3d1b","webpack://lottery-app/src/views/History.vue","webpack://lottery-app/./src/views/History.vue?a759","webpack://lottery-app/./src/views/History.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (this.$store.getters.IS_LOGGEDIN)?_c('div',[_c('div',{staticClass:\"flex flex-col items-center py-7 max-w-7xl mx-auto\"},[_c('h1',{staticClass:\"text-xl font-bold \"},[_vm._v(\"Your History:\")]),_c('div',{staticClass:\"m-5 w-full flex flex-col gap-2 justify-center items-center \"},[_c('circle-loading',{attrs:{\"loadingProp\":_vm.loading}}),(_vm.emptyHistory)?_c('div',[_vm._v(\" You don't have previous games at history :/ \")]):_vm._e(),_vm._l((_vm.selectedNums),function(num,index){return _c('div',{key:index,staticClass:\"mb-2 bg-white odd:bg-zinc-100 rounded-md shadow-md max-w-lg w-11/12\"},[_c('div',{staticClass:\"relative\"},[_c('span',{staticClass:\"relative py-4 px-2 sm:p-4  flex flex-col items-center justify-items-start cursor-pointer\",attrs:{\"tabindex\":\"0\"},on:{\"click\":function($event){_vm.historyDetails(_vm.selectedNums[index],_vm.drawedNums[index],_vm.moneyWon[index],_vm.drawTime[index].toDate().toUTCString().split(' ').slice(0, 5).join(' '),_vm.docsID[index])}}},[_c('div',{staticClass:\"flex w-full gap-1\"},[_c('span',{staticClass:\"font-semibold flex-1 flex justify-end items-center text-right\"},[_vm._v(\"Draw date:\")]),_c('div',{staticClass:\"flex-1 flex justify-start items-center\"},[_vm._v(_vm._s(_vm.drawTime[index].toDate().toUTCString().split(' ').slice(0, 5).join(' ')))])]),_c('div',{staticClass:\"flex w-full gap-1\"},[_c('span',{staticClass:\"font-semibold flex-1 flex justify-end items-center text-right\"},[_vm._v(\"User's numbers:\")]),_c('div',{staticClass:\"flex-1 flex justify-start items-center\"},[_vm._v(_vm._s(num ? num.join(', ') : \"\"))])]),_c('div',{staticClass:\"flex w-full gap-1\"},[_c('span',{staticClass:\"font-semibold flex-1 flex justify-end items-center text-right\"},[_vm._v(\"Drawed Numbers:\")]),_c('div',{staticClass:\"flex-1 flex justify-start items-center\"},[_vm._v(_vm._s(_vm.drawedNums[index] ? _vm.drawedNums[index].join(', ') : \"\"))])]),_c('div',{staticClass:\"flex w-full gap-1\"},[_c('span',{staticClass:\"font-semibold flex-1 flex justify-end items-center text-right\"},[_vm._v(\"Money won:\")]),_c('div',{staticClass:\"flex-1 flex justify-start items-center\"},[_vm._v(_vm._s(_vm.moneyWon[index] > 0 ? _vm.moneyWon[index] : '-'))])])]),_c('span',{staticClass:\"absolute top-0 right-2  cursor-pointer \",attrs:{\"tabindex\":\"0\"},on:{\"click\":function($event){return _vm.removeDrawHistory(index)}}},[_vm._v(\"âœ•\")])])])})],2),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.loading && this.selectedNums.length > 6),expression:\"!loading && this.selectedNums.length > 6\"}],staticClass:\"cursor-pointer underline font-semibold\",on:{\"click\":_vm.goAtTop}},[_vm._v(\"Go at top\")])])]):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div v-if=\"this.$store.getters.IS_LOGGEDIN\">\r\n        <div class=\"flex flex-col items-center py-7 max-w-7xl mx-auto\">\r\n            <h1 class=\"text-xl font-bold \">Your History:</h1>\r\n            <div class=\"m-5 w-full flex flex-col gap-2 justify-center items-center \">\r\n                <circle-loading :loadingProp=\"loading\"/>\r\n                <div v-if=\"emptyHistory\">\r\n                    You don't have previous games at history :/\r\n                </div>\r\n                <div v-for=\"(num, index) in selectedNums\" :key=\"index\" class=\"mb-2 bg-white odd:bg-zinc-100 rounded-md shadow-md max-w-lg w-11/12\">\r\n\r\n                    <div class=\"relative\">\r\n                        <span\r\n                            @click=\"historyDetails(selectedNums[index],drawedNums[index],moneyWon[index],drawTime[index].toDate().toUTCString().split(' ').slice(0, 5).join(' '),docsID[index])\"\r\n                            tabindex=0 \r\n                            class=\"relative py-4 px-2 sm:p-4  flex flex-col items-center justify-items-start cursor-pointer\">\r\n\r\n                            <div class=\"flex w-full gap-1\">\r\n                                <span class=\"font-semibold flex-1 flex justify-end items-center text-right\">Draw date:</span>\r\n                                <div class=\"flex-1 flex justify-start items-center\">{{drawTime[index].toDate().toUTCString().split(' ').slice(0, 5).join(' ')}}</div>  \r\n                            </div>\r\n                            <div class=\"flex w-full gap-1\">\r\n                                <span class=\"font-semibold flex-1 flex justify-end items-center text-right\">User's numbers:</span> \r\n                                <div class=\"flex-1 flex justify-start items-center\">{{num ? num.join(', ') : \"\"}}</div> \r\n                            </div>\r\n                            <div class=\"flex w-full gap-1\">\r\n                                <span class=\"font-semibold flex-1 flex justify-end items-center text-right\">Drawed Numbers:</span> \r\n                                <div class=\"flex-1 flex justify-start items-center\">{{drawedNums[index] ? drawedNums[index].join(', ') : \"\"}}</div>\r\n                            </div>\r\n                            <div class=\"flex w-full gap-1\">\r\n                                <span class=\"font-semibold flex-1 flex justify-end items-center text-right\">Money won:</span>\r\n                                <div class=\"flex-1 flex justify-start items-center\">{{moneyWon[index] > 0 ? moneyWon[index] : '-'}}</div> \r\n                            </div>\r\n                        </span>\r\n                        <span tabindex=0 class=\"absolute top-0 right-2  cursor-pointer \" @click=\"removeDrawHistory(index)\">&#10005;</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div @click=\"goAtTop\" v-show=\"!loading && this.selectedNums.length > 6\" class=\"cursor-pointer underline font-semibold\">Go at top</div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { getFirestore, getDocs, collection, query, orderBy, deleteDoc, doc } from \"firebase/firestore\";\r\nimport CircleLoading from '@/components/CircleLoading.vue';\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport default {\r\n    name: 'AppHistory',\r\n    components:{\r\n        'circle-loading':  CircleLoading,\r\n    },\r\n    data(){\r\n        return{\r\n            selectedNums:[],\r\n            drawedNums:[],\r\n            moneyWon:[],\r\n            drawTime: [],\r\n            docsID:[],\r\n            emptyHistory:false,\r\n            loading:false,\r\n            updateHistory: false,\r\n        }\r\n    },\r\n    computed: {\r\n    ...mapGetters(['GET_UPDATE_HISTORY'])\r\n    },\r\n    methods:{\r\n        async removeDrawHistory(index){\r\n        if (this.$user){\r\n            try {\r\n                await deleteDoc(doc(getFirestore(), \"users\", this.$user.uid,\"history\",this.docsID[index]));\r\n                this.selectedNums.splice(index, 1);\r\n                this.drawedNums.splice(index, 1);\r\n                this.moneyWon.splice(index, 1);\r\n                this.drawTime.splice(index, 1);\r\n                this.docsID.splice(index, 1);\r\n            } catch (e) {\r\n                console.error(\"Error adding document: \", e);\r\n            }\r\n        }\r\n        this.selectedNums.length === 0 ? this.emptyHistory = true : this.emptyHistory = false\r\n        },\r\n        goAtTop(){\r\n            window.scrollTo({top: 0, behavior: 'smooth'});\r\n        },\r\n        historyDetails(selectedNums,drawedNums,moneyWon,drawTime,docsID){\r\n            this.$store.dispatch('SET_HISTORYDETAILS',{\r\n                selectedNums:selectedNums,\r\n                drawedNums:drawedNums,\r\n                moneyWon:moneyWon,\r\n                drawTime:drawTime,\r\n            })\r\n            this.$router.push({ path: '/history/' + docsID })\r\n        },\r\n        async getHistoryData(){\r\n            if (this.$user){\r\n                this.loading=true;\r\n                this.selectedNums = [];\r\n                this.drawedNums = [];\r\n                this.moneyWon = [];\r\n                this.drawTime = [];\r\n                this.docsID = [];\r\n                try {\r\n                    const q = query(collection(getFirestore(), \"users\", this.$user.uid,\"history\"),orderBy(\"drawTime\", \"desc\"))\r\n                    const userHistory = await getDocs(q);\r\n                    userHistory.forEach((doc) => {\r\n                        this.selectedNums.push(doc.data().playerNums);\r\n                        this.drawedNums.push(doc.data().drawNums);\r\n                        this.moneyWon.push(doc.data().totalWon);\r\n                        this.drawTime.push(doc.data().drawTime);\r\n                        this.docsID.push(doc.id);\r\n                    });\r\n                } catch (e) {\r\n                    console.error(\"Error adding document: \", e);\r\n                }finally{\r\n                    this.loading=false;\r\n                    this.$store.commit('SET_UPDATEHISTORY',false)\r\n                }\r\n                this.selectedNums.length === 0 ? this.emptyHistory = true : this.emptyHistory = false\r\n            }\r\n        },\r\n    },\r\n    created(){\r\n        this.getHistoryData()\r\n    },\r\n    activated(){\r\n        if (this.GET_UPDATE_HISTORY){\r\n            this.getHistoryData()\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./History.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./History.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./History.vue?vue&type=template&id=471a5a18&\"\nimport script from \"./History.vue?vue&type=script&lang=js&\"\nexport * from \"./History.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","$store","getters","staticClass","_v","attrs","loading","_e","_l","num","index","key","on","$event","historyDetails","selectedNums","drawedNums","moneyWon","drawTime","toDate","toUTCString","split","slice","join","docsID","_s","removeDrawHistory","directives","name","rawName","value","length","expression","goAtTop","staticRenderFns","components","data","emptyHistory","updateHistory","computed","methods","console","window","top","behavior","path","userHistory","created","activated","component"],"sourceRoot":""}