"use strict";(self["webpackChunklottery_app"]=self["webpackChunklottery_app"]||[]).push([[769],{3562:function(e,t,s){s.d(t,{Z:function(){return c}});var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-ball",attrs:{tabindex:"0"}},[e._t("default",(function(){return[e._v(" "+e._s(e.numProp)+" ")]}))],2)},r=[],a=(s(9653),{props:{numProp:{number:Number,require:!0}}}),i=a,o=s(1001),u=(0,o.Z)(i,n,r,!1,null,null,null),c=u.exports},1769:function(e,t,s){s.r(t),s.d(t,{default:function(){return x}});var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return this.$store.getters.IS_LOGGEDIN?s("div",{staticClass:"relative"},[s("div",{staticClass:"flex flex-col max-w-7xl w-11/12 mx-auto "},[s("div",{staticClass:"bg-white rounded-md shadow-md py-5 px-3  md:px-24  my-5 flex flex-col"},[s("div",{staticClass:"flex justify-between  "},[s("div",{staticClass:"flex gap-2 flex-col"},[s("span",{staticClass:"mb-2 font-semibold text-lg"},[e._v("Drawed Number:")]),s("div",{staticClass:"grid grid-rows-1 grid-cols-1 grid-flow-row gap-y-8 align-middle self-center justify-items-center text-lg font-semibold"},e._l(e.drawedNums,(function(e){return s("div",{key:e,staticClass:"flex justify-center items-center"},[s("base-ball",{attrs:{numProp:e}})],1)})),0)]),s("div",{staticClass:"flex gap-2 flex-col"},[s("span",{staticClass:"mb-2 font-semibold text-lg"},[e._v("Your Number:")]),s("div",{staticClass:"grid grid-rows-1 grid-cols-1 grid-flow-row gap-y-8 align-middle self-center justify-items-center text-lg font-semibold"},e._l(e.selectedNums,(function(t){return s("div",{key:t,staticClass:"flex justify-center items-center"},[s("base-ball",{ref:"UserNums"+t,refInFor:!0},[s("span",{staticClass:"underline decoration-gray-900"},[e._v(e._s(t))])])],1)})),0)])]),s("span",{staticClass:"my-2 font-semibold text-lg flex items-center justify-center"},[e._v("You have won: "+e._s(e.moneyWon))])])]),s("the-modal",{attrs:{showModal:e.showModal,moneyWon:this.moneyWon,drawTime:this.currentTime}})],1):e._e()},r=[],a=s(6198),i=s(4367),o=(s(8975),s(1539),s(4747),s(6699),s(2023),function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("dialog",{ref:"dialog",staticClass:"bg-white p-3 sm:p-5 border-2 rounded-md max-w-xl w-3/4"},[s("div",{staticClass:"pb-6 text-lg font-semibold"},[e._v(" "+e._s(e.moneyWon>0?"Congratulations! You just won: "+e.moneyWon+"â‚¬":"You didn't won anything. Better luck next time!")+" ")]),s("div",{staticClass:"flex justify-between flex-wrap"},[s("base-button",{staticClass:"bg-orange-500 text-white",nativeOn:{"~click":function(t){return e.saveDraw()}}},[e._v(" Save to History ")]),s("base-button",{staticClass:"text-blue-600",nativeOn:{"~click":function(t){return e.goAtMain()}}},[e._v(" Go back ")])],1)])}),u=[],c=(s(9653),s(6926)),l=s(4137),d={components:{"base-button":l.Z},props:{moneyWon:Number,drawTime:Date,showModal:Boolean},watch:{showModal:function(e){var t=this;this.$nextTick((function(){e?t.$refs.dialog.showModal():t.$refs.dialog.close()}))}},created:function(){var e=this;this.escapeHandler=function(t){"Escape"===t.key&&e.showModal&&e.goAtMain()},document.addEventListener("keydown",this.escapeHandler)},destroyed:function(){document.removeEventListener("keydown",this.escapeHandler)},methods:{saveDraw:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$store.dispatch("SET_TOAST",{show:!1,msg:"",type:""}),!e.$user){t.next=12;break}return t.prev=2,t.next=5,(0,c.ET)((0,c.hJ)((0,c.ad)(),"users",e.$user.uid,"history"),{drawTime:e.drawTime,drawNums:e.$store.getters.GET_CURRENTDRAWS,playerNums:e.$store.getters.GET_PLAYERNUMS,totalWon:e.moneyWon},{merge:!0});case 5:e.$store.dispatch("SET_TOAST",{show:!0,msg:"Draw saved to history successfully!",type:"success"}),e.$store.commit("SET_UPDATEHISTORY",!0),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),console.error("Error adding document: ",t.t0);case 12:e.goAtMain();case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()},goAtMain:function(){this.$store.commit("CLEAR_PLAYERNUMS",[]),this.$store.commit("CLEAR_CURRENTDRAW",[]),this.$router.push({path:"/"})}}},m=d,h=s(1001),f=(0,h.Z)(m,o,u,!1,null,null,null),w=f.exports,g=s(4665),p=s(3562),v={name:"AppDraw",components:{"the-modal":w,"base-ball":p.Z},data:function(){return{selectedNums:[],drawedDiv:"Loading...",drawEnded:!1,drawedNums:[],showModal:!1,winningNum:0,moneyWon:0,currentTime:null}},computed:(0,i.Z)({},(0,g.Se)(["GET_PLAYERNUMS","GET_CURRENTDRAWS"])),methods:{highlightDrawedNums:function(){var e=this;this.drawedNums.forEach((function(t){e.selectedNums.includes(t)&&(e.winningNum++,setTimeout((function(){e.$refs["UserNums"+t][0].$el.children[0].classList.add("animate-spin"),e.$refs["UserNums"+t][0].$el.classList.value="app-ball shadow-3d-match sm:shadow-3d-match-sm"})))}))},startDrawn:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.drawedDiv="",s=function(){return new Promise((function(e){setTimeout(e,"2000")}))};case 2:if(!(e.drawedNums.length<5&&e.$user)){t.next=7;break}return t.next=5,s().then((function(){var t=Math.ceil(29*Math.random()+1);while(e.drawedNums.includes(t))t=Math.ceil(29*Math.random()+1);e.selectedNums.includes(t)&&(e.winningNum++,e.$refs["UserNums"+t][0].$el.children[0].classList.add("animate-spin"),e.$refs["UserNums"+t][0].$el.classList.value="app-ball shadow-3d-match sm:shadow-3d-match-sm"),e.drawedNums.push(t),e.$store.commit("ADD_CURRENTDRAW",e.drawedNums);try{(0,c.pl)((0,c.JU)((0,c.ad)(),"users",e.$user.uid),{currentNums:e.$store.getters.GET_PLAYERNUMS,drawRunning:e.$store.getters.GET_DRAWINPROG,currentDraw:e.drawedNums},{merge:!0})}catch(s){console.log("Error adding document: ",s)}e.checkWinningNums()}));case 5:t.next=2;break;case 7:5===e.drawedNums.length&&(e.currentTime=new Date,e.showModal=!0,e.$store.commit("SET_DRAWINPROG",!1),e.updateDrawingDB());case 8:case"end":return t.stop()}}),t)})))()},checkWinningNums:function(){switch(this.winningNum){case 3:this.moneyWon=5;break;case 4:this.moneyWon=10;break;case 5:this.moneyWon=20;break;default:this.moneyWon=0}},updateDrawingDB:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.$user){t.next=9;break}return t.prev=1,t.next=4,(0,c.pl)((0,c.JU)((0,c.ad)(),"users",e.$user.uid),{drawRunning:e.$store.getters.GET_DRAWINPROG,currentNums:[],currentDraw:[]},{merge:!0});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](1),console.error("Error adding document: ",t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})))()}},mounted:function(){this.$nextTick((function(){var e=this;this.selectedNums=this.GET_PLAYERNUMS,this.drawedNums=this.GET_CURRENTDRAWS,0!==this.drawedNums.length?(this.highlightDrawedNums(),this.startDrawn()):setTimeout((function(){e.startDrawn()}),"1000")}))}},N=v,b=(0,h.Z)(N,n,r,!1,null,null,null),x=b.exports}}]);
//# sourceMappingURL=769-legacy.719d668d.js.map