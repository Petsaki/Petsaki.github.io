"use strict";(self["webpackChunklottery_app"]=self["webpackChunklottery_app"]||[]).push([[868],{6868:function(t,s,e){e.r(s),e.d(s,{default:function(){return m}});var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return this.$store.getters.IS_LOGGEDIN?e("div",[e("div",{staticClass:"flex flex-col items-center py-7 max-w-7xl mx-auto"},[e("h1",{staticClass:"text-xl font-bold "},[t._v("Your History:")]),e("div",{staticClass:"m-5 w-full flex flex-col gap-2 justify-center items-center "},[e("circle-loading",{attrs:{loadingProp:t.loading}}),t.emptyHistory?e("div",[t._v(" You don't have previous games at history :/ ")]):t._e(),t._l(t.selectedNums,(function(s,i){return e("div",{key:i,staticClass:"mb-2 bg-white odd:bg-zinc-100 rounded-md shadow-md max-w-lg w-11/12"},[e("div",{staticClass:"relative"},[e("span",{staticClass:"relative py-4 px-2 sm:p-4  flex flex-col items-center justify-items-start cursor-pointer",attrs:{tabindex:"0"},on:{click:function(s){t.historyDetails(t.selectedNums[i],t.drawedNums[i],t.moneyWon[i],t.drawTime[i].toDate().toUTCString().split(" ").slice(0,5).join(" "),t.docsID[i])}}},[e("div",{staticClass:"flex w-full gap-1"},[e("span",{staticClass:"font-semibold flex-1 flex justify-end items-center text-right"},[t._v("Draw date:")]),e("div",{staticClass:"flex-1 flex justify-start items-center"},[t._v(t._s(t.drawTime[i].toDate().toUTCString().split(" ").slice(0,5).join(" ")))])]),e("div",{staticClass:"flex w-full gap-1"},[e("span",{staticClass:"font-semibold flex-1 flex justify-end items-center text-right"},[t._v("User's numbers:")]),e("div",{staticClass:"flex-1 flex justify-start items-center"},[t._v(t._s(s?s.join(", "):""))])]),e("div",{staticClass:"flex w-full gap-1"},[e("span",{staticClass:"font-semibold flex-1 flex justify-end items-center text-right"},[t._v("Drawed Numbers:")]),e("div",{staticClass:"flex-1 flex justify-start items-center"},[t._v(t._s(t.drawedNums[i]?t.drawedNums[i].join(", "):""))])]),e("div",{staticClass:"flex w-full gap-1"},[e("span",{staticClass:"font-semibold flex-1 flex justify-end items-center text-right"},[t._v("Money won:")]),e("div",{staticClass:"flex-1 flex justify-start items-center"},[t._v(t._s(t.moneyWon[i]>0?t.moneyWon[i]:"-"))])])]),e("span",{staticClass:"absolute top-0 right-2  cursor-pointer ",attrs:{tabindex:"0"},on:{click:function(s){return t.removeDrawHistory(i)}}},[t._v("âœ•")])])])}))],2),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading&&this.selectedNums.length>6,expression:"!loading && this.selectedNums.length > 6"}],staticClass:"cursor-pointer underline font-semibold",on:{click:t.goAtTop}},[t._v("Go at top")])])]):t._e()},a=[],o=e(6926),r=e(4498),l=e(4665),n={name:"AppHistory",components:{"circle-loading":r.Z},data(){return{selectedNums:[],drawedNums:[],moneyWon:[],drawTime:[],docsID:[],emptyHistory:!1,loading:!1,updateHistory:!1}},computed:{...(0,l.Se)(["GET_UPDATE_HISTORY"])},methods:{async removeDrawHistory(t){if(this.$user)try{await(0,o.oe)((0,o.JU)((0,o.ad)(),"users",this.$user.uid,"history",this.docsID[t])),this.selectedNums.splice(t,1),this.drawedNums.splice(t,1),this.moneyWon.splice(t,1),this.drawTime.splice(t,1),this.docsID.splice(t,1)}catch(s){console.error("Error adding document: ",s)}0===this.selectedNums.length?this.emptyHistory=!0:this.emptyHistory=!1},goAtTop(){window.scrollTo({top:0,behavior:"smooth"})},historyDetails(t,s,e,i,a){this.$store.dispatch("SET_HISTORYDETAILS",{selectedNums:t,drawedNums:s,moneyWon:e,drawTime:i}),this.$router.push({path:"/history/"+a})},async getHistoryData(){if(this.$user){this.loading=!0,this.selectedNums=[],this.drawedNums=[],this.moneyWon=[],this.drawTime=[],this.docsID=[];try{const t=(0,o.IO)((0,o.hJ)((0,o.ad)(),"users",this.$user.uid,"history"),(0,o.Xo)("drawTime","desc")),s=await(0,o.PL)(t);s.forEach((t=>{this.selectedNums.push(t.data().playerNums),this.drawedNums.push(t.data().drawNums),this.moneyWon.push(t.data().totalWon),this.drawTime.push(t.data().drawTime),this.docsID.push(t.id)}))}catch(t){console.error("Error adding document: ",t)}finally{this.loading=!1,this.$store.commit("SET_UPDATEHISTORY",!1)}0===this.selectedNums.length?this.emptyHistory=!0:this.emptyHistory=!1}}},created(){this.getHistoryData()},activated(){this.GET_UPDATE_HISTORY&&this.getHistoryData()}},d=n,c=e(1001),u=(0,c.Z)(d,i,a,!1,null,null,null),m=u.exports}}]);
//# sourceMappingURL=868.26fa0bcd.js.map